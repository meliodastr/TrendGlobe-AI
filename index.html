<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <title>TrendGlobe AI | Geleceği Keşfet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { background: #020617; color: white; font-family: 'Plus Jakarta Sans', sans-serif; }
        .trend-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); transition: 0.4s; }
        .trend-card:hover { transform: translateY(-10px); border-color: #6366f1; box-shadow: 0 20px 40px -20px rgba(99,102,241,0.5); }
        .ai-glow { background: linear-gradient(90deg, #6366f1, #a855f7); }
        video { filter: brightness(0.8); transition: 0.3s; }
        .trend-card:hover video { filter: brightness(1.1); }
    </style>
</head>
<body class="p-6">
    <nav class="max-w-7xl mx-auto flex justify-between items-center mb-12 py-4">
        <h1 class="text-3xl font-black italic tracking-tighter ai-glow bg-clip-text text-transparent underline">TRENDGLOBE</h1>
        <div class="flex gap-4">
            <button class="bg-white/5 px-6 py-2 rounded-full border border-white/10 hover:bg-white/10 transition">Giriş</button>
            <button class="ai-glow px-6 py-2 rounded-full font-bold shadow-lg shadow-indigo-500/20">PRO'YA GEÇ</button>
        </div>
    </nav>

    <div id="trendGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
        </div>

    <script>
        const SUPABASE_URL = 'https://vcd6z_anjrrylfklscn.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_vcD6Z_aNjRRyLfklScn_Bw_R9xkKkIr'; // Bu key'in doğru olduğundan emin ol
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function loadTrends() {
            const { data, error } = await _supabase.from('trends').select('*').order('created_at', { ascending: false });
            if (error) return console.error(error);

            const grid = document.getElementById('trendGrid');
            grid.innerHTML = data.map(t => `
                <div class="trend-card rounded-[2.5rem] overflow-hidden p-4">
                    <div class="relative h-64 rounded-[2rem] overflow-hidden mb-6 bg-slate-900">
                        ${t.video_url.includes('mp4') || t.video_url.includes('tiktok') 
                            ? `<video src="${t.video_url}" class="w-full h-full object-cover" loop muted autoplay playsinline></video>`
                            : `<img src="${t.video_url}" class="w-full h-full object-cover" />`
                        }
                        <div class="absolute top-4 left-4 ai-glow px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest">Canlı Trend</div>
                    </div>
                    <div class="px-2">
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-indigo-400 text-xs font-bold uppercase tracking-tighter">${t.category}</span>
                            <span class="text-green-400 font-black">${t.growth_rate}</span>
                        </div>
                        <h3 class="text-2xl font-extrabold mb-4 leading-none">${t.title}</h3>
                        <div class="bg-indigo-500/10 border border-indigo-500/20 p-4 rounded-2xl mb-6">
                            <p class="text-[10px] text-indigo-400 font-bold mb-1 uppercase tracking-widest">AI Strateji Notu</p>
                            <p class="text-sm text-gray-300 leading-relaxed italic">"${t.ai_analysis}"</p>
                        </div>
                        <button class="w-full py-4 rounded-2xl bg-white text-black font-black hover:bg-indigo-500 hover:text-white transition-all">ANALİZİ AÇ</button>
                    </div>
                </div>
            `).join('');
        }
        loadTrends();
    </script>
</body>
</html>
